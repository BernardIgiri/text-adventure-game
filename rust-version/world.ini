;=========================
; ROOMS
;=========================
[Room:LivingRoom]
description=An old man sits by the fire.
exits=east:Basement
items=gold_ring

[Room:Basement]
description=A damp, dark basement.
exits=west:LivingRoom
items=valve
actions=turn_valve

[Room:Basement|drained]
description=The basement floor is now dry, revealing a trapdoor.
exits=west:LivingRoom
items=trapdoor

;=========================
; ITEMS
;=========================
[Item:gold_ring]
description=A shiny gold ring with initials engraved inside.

[Item:valve]
description=A rusty water valve.

[Item:trapdoor]
description=A wooden trapdoor revealed beneath drained water.

;=========================
; ACTIONS
;=========================
[Action:turn_valve]
change_room=Basement->drained
description=You turn the valve. Water drains away with a loud gurgle.

;=========================
; CHARACTERS
;=========================
[Character:OldMan]
origin=LivingRoom
start_dialogue=dlg_intro

;=========================
; DIALOGUES
;=========================
[Dialogue:dlg_intro]
text=Hello there. What brings you here?
responses=ask_ring, ask_basement
requires=none
action=none

[Dialogue:dlg_ring]
text=Ah, my wife gave it to me long ago...
responses=goodbye
requires=has_item:gold_ring
action=none

[Dialogue:dlg_basement]
text=Don’t go down there unless you’re ready.
responses=goodbye
requires=room_variant:Basement|drained
action=none

[Dialogue:dlg_default]
text=I have nothing more to say right now.
responses=goodbye
requires=none
action=none

;=========================
; RESPONSES
;=========================
[Response:ask_ring]
text=That’s a fine ring you're wearing.
leads_to=dlg_ring
requires=has_item:gold_ring

[Response:ask_basement]
text=What’s in the basement?
leads_to=dlg_basement

[Response:goodbye]
text=Goodbye.
leads_to=none

[Response:goodbye]
text=Goodbye.
leads_to=none
